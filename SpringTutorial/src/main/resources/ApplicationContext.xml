<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"
       default-lazy-init="true"
       default-init-method="init-object">
    <!-- Так как реализвуется context interface то подтягиваются (инит) все методы бинов к которым подходит,
         а с ленивым вариантом только тогда, когда будет создан сам бин-->


    <bean id="t1000" class="impls.robot.ModelT1000" scope="prototype" depends-on="database">
        <!--Prototype каждый вызов - новый обьект. SingleTon один обьект для всех этого id-->
        <!--Последовательность инициализации depends on будет сначала вызван бин database-->
        <!-- parent="baseModel" - наследование конифгов бинов -->
        <constructor-arg ref="sonyHand"/>
        <constructor-arg ref="sonyHead"/>
        <constructor-arg ref="sonyLeg"/>
        <!--Setter-->
        <property name="hand" ref="toshibaHand"/>
        <property name="head" ref="toshibaHead"/>
        <property name="leg" ref="toshibaLeg"/>
    </bean>

    <bean id="sonyHand" class="impls.sony.SonyHand"/>
    <bean id="sonyHead" class="impls.sony.SonyHead"/>
    <bean id="sonyLeg" class="impls.sony.SonyLeg"/>

    <bean id="toshibaHand" class="impls.toshiba.ToshibaHand"/>
    <bean id="toshibaHead" class="impls.toshiba.ToshibaHead"/>
    <bean id="toshibaLeg" class="impls.toshiba.ToshibaLeg"/>
    <bean class="main.MyBeanPostProcessor"/>
    <bean id="database" class="impls.Database"/>

    <bean id="baseModel" abstract="true">

        <constructor-arg ref="sonyHand" />
        <constructor-arg ref="sonyLeg"/>
        <constructor-arg ref="sonyHead"/>


    </bean>
    <bean id="t1000Conveyor" class="impls.conveyor.T1000Conveyor">
        <lookup-method name="createRobot" bean="t1000" />
    </bean>







    <!--Collection pool-->
    <bean id="t1000Pool" class="impls.pool.T1000Pool">
        <property name="robotCollection">
            <list>
                <ref bean="t1000" />

                <bean class="impls.robot.ModelT1000"
                      parent="baseModel">

                    <constructor-arg value="gold" index="3" type="String" />
                    <constructor-arg value="2007" index="4" type="int" />
                    <constructor-arg value="false" index="5" type="boolean" />
                </bean>


            </list>
        </property>
    </bean>
</beans>